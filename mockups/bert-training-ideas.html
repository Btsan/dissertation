<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>BERT Training Process Visualization Ideas</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			padding: 40px;
			background: #f5f5f5;
		}
		.variation {
			background: white;
			padding: 30px;
			margin-bottom: 40px;
			border-radius: 8px;
			box-shadow: 0 2px 8px rgba(0,0,0,0.1);
		}
		.variation h2 {
			color: #667eea;
			border-bottom: 3px solid #667eea;
			padding-bottom: 10px;
			margin-top: 0;
		}
		.variation h3 {
			color: #333;
			margin-top: 25px;
		}

		/* Common styles */
		.step-title {
			background: #667eea;
			color: white;
			padding: 8px 15px;
			border-radius: 4px;
			display: inline-block;
			font-weight: bold;
			margin-bottom: 15px;
			font-size: 0.9em;
		}
		.arrow-down {
			text-align: center;
			font-size: 2em;
			color: #667eea;
			margin: 15px 0;
		}
		.note {
			background: #fff3e0;
			border-left: 4px solid #ff9800;
			padding: 12px;
			margin: 15px 0;
			font-size: 0.9em;
		}

		/* Variation 1: Vertical Pipeline */
		.pipeline-step {
			border: 2px solid #ddd;
			border-radius: 8px;
			padding: 20px;
			margin: 20px 0;
			background: white;
		}
		.data-table {
			width: 100%;
			border-collapse: collapse;
			font-size: 0.85em;
			margin: 10px 0;
		}
		.data-table th {
			background: #667eea;
			color: white;
			padding: 10px;
			border: 1px solid #333;
		}
		.data-table td {
			padding: 10px;
			border: 1px solid #ddd;
			text-align: center;
		}
		.data-table .raw-value {
			background: #e3f2fd;
		}
		.data-table .dyadic-value {
			background: #fff3e0;
			font-family: 'Courier New', monospace;
			font-size: 0.9em;
		}
		.data-table .hashed-value {
			background: #e8f5e9;
			font-family: 'Courier New', monospace;
			font-weight: bold;
		}
		.column-header-note {
			font-size: 0.75em;
			color: #666;
			font-weight: normal;
		}

		/* Variation 2: Side-by-side transformation */
		.transform-container {
			display: grid;
			grid-template-columns: 1fr auto 1fr;
			gap: 20px;
			align-items: center;
			margin: 20px 0;
		}
		.transform-box {
			border: 2px solid #ddd;
			border-radius: 8px;
			padding: 15px;
			background: white;
		}
		.transform-box h4 {
			margin-top: 0;
			color: #667eea;
			font-size: 0.9em;
			text-transform: uppercase;
		}
		.arrow-right {
			font-size: 3em;
			color: #667eea;
			text-align: center;
		}
		.value-mapping {
			display: flex;
			align-items: center;
			gap: 10px;
			margin: 8px 0;
			padding: 8px;
			background: #f9f9f9;
			border-radius: 4px;
		}
		.value-label {
			font-weight: bold;
			min-width: 80px;
		}
		.value-display {
			padding: 6px 12px;
			border-radius: 4px;
			font-family: 'Courier New', monospace;
			flex: 1;
		}
		.value-display.raw {
			background: #e3f2fd;
			border: 1px solid #2196f3;
		}
		.value-display.dyadic {
			background: #fff3e0;
			border: 1px solid #ff9800;
		}
		.value-display.hashed {
			background: #e8f5e9;
			border: 1px solid #4caf50;
		}

		/* Variation 3: Focused on dyadic intervals */
		.dyadic-example {
			background: #fff3e0;
			border: 2px solid #ff9800;
			border-radius: 8px;
			padding: 20px;
			margin: 20px 0;
		}
		.dyadic-example h4 {
			margin-top: 0;
			color: #e65100;
		}
		.interval-breakdown {
			font-family: 'Courier New', monospace;
			background: white;
			padding: 15px;
			border-radius: 4px;
			margin: 10px 0;
		}
		.interval-line {
			margin: 8px 0;
			padding: 8px;
			background: #fff8e1;
			border-left: 3px solid #ff9800;
		}

		/* Variation 4: Complete training flow */
		.training-flow {
			display: flex;
			flex-direction: column;
			gap: 15px;
		}
		.flow-stage {
			display: flex;
			align-items: center;
			gap: 15px;
		}
		.stage-number {
			background: #667eea;
			color: white;
			width: 35px;
			height: 35px;
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			font-weight: bold;
			flex-shrink: 0;
		}
		.stage-content {
			flex: 1;
			border: 2px solid #ddd;
			border-radius: 8px;
			padding: 15px;
			background: white;
		}
		.stage-content h4 {
			margin: 0 0 10px 0;
			color: #667eea;
		}
		.stage-content p {
			margin: 5px 0;
			font-size: 0.9em;
		}
		.stage-example {
			background: #f5f5f5;
			padding: 10px;
			border-radius: 4px;
			margin-top: 10px;
			font-size: 0.85em;
			font-family: 'Courier New', monospace;
		}

		/* Variation 5: Compact table format */
		.compact-training {
			border: 2px solid #333;
			border-radius: 8px;
			overflow: hidden;
			margin: 20px 0;
		}
		.compact-training table {
			width: 100%;
			border-collapse: collapse;
		}
		.compact-training th {
			background: #667eea;
			color: white;
			padding: 12px;
			border: 1px solid #333;
			font-size: 0.85em;
		}
		.compact-training td {
			padding: 12px;
			border: 1px solid #ddd;
			font-size: 0.85em;
		}
		.compact-training .stage-col {
			background: #f0f0f0;
			font-weight: bold;
			min-width: 120px;
		}
		.compact-training .example-col {
			font-family: 'Courier New', monospace;
		}
		.compact-training tr.point-pred td.example-col {
			background: #e3f2fd;
		}
		.compact-training tr.range-pred td.example-col {
			background: #fff3e0;
		}

		/* Legend */
		.legend {
			display: flex;
			gap: 20px;
			margin: 20px 0;
			flex-wrap: wrap;
		}
		.legend-item {
			display: flex;
			align-items: center;
			gap: 8px;
			font-size: 0.9em;
		}
		.legend-box {
			width: 25px;
			height: 20px;
			border-radius: 3px;
			border: 2px solid;
		}
		.legend-box.raw {
			background: #e3f2fd;
			border-color: #2196f3;
		}
		.legend-box.dyadic {
			background: #fff3e0;
			border-color: #ff9800;
		}
		.legend-box.hashed {
			background: #e8f5e9;
			border-color: #4caf50;
		}
	</style>
</head>
<body>
	<h1 style="color: #667eea;">BERT Training Process - Visualization Ideas</h1>
	<p style="color: #666; margin-bottom: 40px;">Different approaches to illustrating how training data is prepared from raw tables.</p>

	<!-- ============================================ -->
	<!-- VARIATION 1: Vertical Pipeline with Tables -->
	<!-- ============================================ -->
	<div class="variation">
		<h2>Variation 1: Vertical Pipeline with Sample Rows</h2>
		<p><strong>Concept:</strong> Show the transformation step-by-step with sample table rows at each stage.</p>

		<div class="pipeline-step">
			<div class="step-title">Step 1: Raw Table Data</div>
			<table class="data-table">
				<thead>
					<tr>
						<th>customer_id</th>
						<th>age<br><span class="column-header-note">(point pred)</span></th>
						<th>city<br><span class="column-header-note">(point pred)</span></th>
						<th>year<br><span class="column-header-note">(range pred)</span></th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="raw-value">1001</td>
						<td class="raw-value">35</td>
						<td class="raw-value">'SF'</td>
						<td class="raw-value">2022</td>
					</tr>
					<tr>
						<td class="raw-value">1002</td>
						<td class="raw-value">42</td>
						<td class="raw-value">'NY'</td>
						<td class="raw-value">2019</td>
					</tr>
					<tr>
						<td class="raw-value">1003</td>
						<td class="raw-value">28</td>
						<td class="raw-value">'LA'</td>
						<td class="raw-value">2021</td>
					</tr>
				</tbody>
			</table>
		</div>

		<div class="arrow-down">↓</div>

		<div class="pipeline-step">
			<div class="step-title">Step 2: Dyadic Interval Annotation (for range-predicate columns)</div>
			<div class="note">
				<strong>Why?</strong> Range predicates like "year ≥ 2020" need to work with discrete embeddings.
				Dyadic intervals discretize the domain.
			</div>
			<table class="data-table">
				<thead>
					<tr>
						<th>customer_id</th>
						<th>age</th>
						<th>city</th>
						<th>year → dyadic intervals</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="raw-value">1001</td>
						<td class="raw-value">35</td>
						<td class="raw-value">'SF'</td>
						<td class="dyadic-value">[2022, 2023)<sub>2⁰</sub></td>
					</tr>
					<tr>
						<td class="raw-value">1002</td>
						<td class="raw-value">42</td>
						<td class="raw-value">'NY'</td>
						<td class="dyadic-value">[2019, 2020)<sub>2⁰</sub></td>
					</tr>
					<tr>
						<td class="raw-value">1003</td>
						<td class="raw-value">28</td>
						<td class="raw-value">'LA'</td>
						<td class="dyadic-value">[2021, 2022)<sub>2⁰</sub></td>
					</tr>
				</tbody>
			</table>
		</div>

		<div class="arrow-down">↓</div>

		<div class="pipeline-step">
			<div class="step-title">Step 3: Hash All Values Using Sketch Hash Functions</div>
			<table class="data-table">
				<thead>
					<tr>
						<th>h(customer_id)</th>
						<th>h(age)</th>
						<th>h(city)</th>
						<th>h(year interval)</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="hashed-value">23</td>
						<td class="hashed-value">7</td>
						<td class="hashed-value">12</td>
						<td class="hashed-value">45</td>
					</tr>
					<tr>
						<td class="hashed-value">8</td>
						<td class="hashed-value">31</td>
						<td class="hashed-value">3</td>
						<td class="hashed-value">19</td>
					</tr>
					<tr>
						<td class="hashed-value">56</td>
						<td class="hashed-value">14</td>
						<td class="hashed-value">28</td>
						<td class="hashed-value">37</td>
					</tr>
				</tbody>
			</table>
		</div>

		<div class="arrow-down">↓</div>

		<div class="pipeline-step">
			<div class="step-title">Step 4: Train BERT with Masked Language Modeling</div>
			<p style="margin: 15px 0; font-size: 0.9em;">
				<strong>Objective:</strong> Randomly mask tokens and train model to predict them from context.
			</p>
			<div style="background: #f5f5f5; padding: 15px; border-radius: 4px; font-family: 'Courier New', monospace; font-size: 0.85em;">
				Example training instance:<br>
				Input: [23, 7, [MASK], 45] → Predict: h(city) = 12<br>
				Input: [[MASK], 31, 3, 19] → Predict: h(customer_id) = 8
			</div>
			<p style="margin-top: 15px; font-size: 0.9em;">
				Model learns: P(h<sub>i</sub>(X<sub>i</sub>) | h<sub>j</sub>(X<sub>j</sub>) for all j ≠ i)
			</p>
		</div>

		<p style="color: #666; font-size: 0.9em; margin-top: 20px;">
			<strong>Pros:</strong> Shows complete flow with concrete examples<br>
			<strong>Cons:</strong> Takes significant vertical space, many tables
		</p>
	</div>

	<!-- ============================================ -->
	<!-- VARIATION 2: Side-by-Side Transformations -->
	<!-- ============================================ -->
	<div class="variation">
		<h2>Variation 2: Side-by-Side Column Transformations</h2>
		<p><strong>Concept:</strong> Show how each column type is transformed differently.</p>

		<h3>Point Predicate Column (e.g., city)</h3>
		<div class="transform-container">
			<div class="transform-box">
				<h4>Raw Value</h4>
				<div class="value-mapping">
					<span class="value-label">Row 1:</span>
					<div class="value-display raw">'SF'</div>
				</div>
				<div class="value-mapping">
					<span class="value-label">Row 2:</span>
					<div class="value-display raw">'NY'</div>
				</div>
			</div>
			<div class="arrow-right">→</div>
			<div class="transform-box">
				<h4>Hashed Value</h4>
				<div class="value-mapping">
					<span class="value-label">h('SF'):</span>
					<div class="value-display hashed">12</div>
				</div>
				<div class="value-mapping">
					<span class="value-label">h('NY'):</span>
					<div class="value-display hashed">3</div>
				</div>
			</div>
		</div>

		<h3 style="margin-top: 30px;">Range Predicate Column (e.g., year)</h3>
		<div class="transform-container">
			<div class="transform-box">
				<h4>Raw Value</h4>
				<div class="value-mapping">
					<span class="value-label">Row 1:</span>
					<div class="value-display raw">2022</div>
				</div>
			</div>
			<div class="arrow-right">→</div>
			<div class="transform-box">
				<h4>Dyadic Interval</h4>
				<div class="value-mapping">
					<span class="value-label">Annotate:</span>
					<div class="value-display dyadic">[2022, 2023)<sub>2⁰</sub></div>
				</div>
			</div>
			<div class="arrow-right">→</div>
			<div class="transform-box">
				<h4>Hashed Interval</h4>
				<div class="value-mapping">
					<span class="value-label">h(interval):</span>
					<div class="value-display hashed">45</div>
				</div>
			</div>
		</div>

		<div style="margin-top: 30px; padding: 20px; background: #e8f5e9; border-left: 4px solid #4caf50; border-radius: 4px;">
			<strong>Result:</strong> All columns become discrete hash values that BERT can process as embeddings.
		</div>

		<p style="color: #666; font-size: 0.9em; margin-top: 20px;">
			<strong>Pros:</strong> Clearly distinguishes point vs range predicate handling<br>
			<strong>Cons:</strong> Doesn't show full table context
		</p>
	</div>

	<!-- ============================================ -->
	<!-- VARIATION 3: Focused on Dyadic Intervals -->
	<!-- ============================================ -->
	<div class="variation">
		<h2>Variation 3: Dyadic Interval Deep Dive</h2>
		<p><strong>Concept:</strong> Emphasize the dyadic interval annotation step with detailed examples.</p>

		<div class="legend">
			<div class="legend-item">
				<div class="legend-box raw"></div>
				<span>Raw Values</span>
			</div>
			<div class="legend-item">
				<div class="legend-box dyadic"></div>
				<span>Dyadic Intervals</span>
			</div>
			<div class="legend-item">
				<div class="legend-box hashed"></div>
				<span>Hashed Values</span>
			</div>
		</div>

		<div class="dyadic-example">
			<h4>Why Dyadic Intervals for Range Predicates?</h4>
			<p style="margin: 10px 0;">
				<strong>Problem:</strong> Queries have range predicates like "year BETWEEN 2018 AND 2022"
			</p>
			<p style="margin: 10px 0;">
				<strong>Solution:</strong> Discretize continuous domains using powers-of-2 intervals
			</p>

			<div style="margin-top: 20px;">
				<strong>Example: Year = 2021</strong>
				<div class="interval-breakdown">
					Level 0 (2⁰=1): [2021, 2022)<br>
					Level 1 (2¹=2): [2020, 2022)<br>
					Level 2 (2²=4): [2020, 2024)<br>
					Level 3 (2³=8): [2016, 2024)<br>
					...
				</div>
				<p style="font-size: 0.9em; color: #666;">
					Each row gets annotated with intervals at all levels.
					Hash each interval separately.
				</p>
			</div>
		</div>

		<div class="pipeline-step" style="margin-top: 30px;">
			<div class="step-title">Complete Training Example</div>
			<table class="data-table">
				<thead>
					<tr>
						<th>Original</th>
						<th>Dyadic Annotation</th>
						<th>Hash Values</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="raw-value">year = 2021</td>
						<td class="dyadic-value">
							[2021,2022)<sub>0</sub>,
							[2020,2022)<sub>1</sub>,
							[2020,2024)<sub>2</sub>, ...
						</td>
						<td class="hashed-value">
							h₀=37, h₁=42, h₂=15, ...
						</td>
					</tr>
				</tbody>
			</table>
			<p style="margin-top: 15px; font-size: 0.9em;">
				<strong>At query time:</strong> Range [2018, 2022] decomposes to intervals, model predicts for each.
			</p>
		</div>

		<p style="color: #666; font-size: 0.9em; margin-top: 20px;">
			<strong>Pros:</strong> Thorough explanation of dyadic interval concept<br>
			<strong>Cons:</strong> May be too detailed for single slide
		</p>
	</div>

	<!-- ============================================ -->
	<!-- VARIATION 4: Numbered Training Flow -->
	<!-- ============================================ -->
	<div class="variation">
		<h2>Variation 4: Numbered Step-by-Step Flow</h2>
		<p><strong>Concept:</strong> Clean numbered pipeline showing each stage.</p>

		<div class="training-flow">
			<div class="flow-stage">
				<div class="stage-number">1</div>
				<div class="stage-content">
					<h4>Start with Table Data</h4>
					<p>Extract rows from the database table</p>
					<div class="stage-example">
						customers: (1001, 35, 'SF', 2022), (1002, 42, 'NY', 2019), ...
					</div>
				</div>
			</div>

			<div class="flow-stage">
				<div class="stage-number">2</div>
				<div class="stage-content">
					<h4>Annotate Range-Predicate Columns with Dyadic Intervals</h4>
					<p>Columns like year, age, price → discretized using powers-of-2</p>
					<div class="stage-example">
						year: 2022 → [2022,2023)<sub>2⁰</sub>, [2022,2024)<sub>2¹</sub>, [2020,2024)<sub>2²</sub>, ...
					</div>
				</div>
			</div>

			<div class="flow-stage">
				<div class="stage-number">3</div>
				<div class="stage-content">
					<h4>Hash All Values Using Sketch Hash Functions</h4>
					<p>Apply h(·) to point values and dyadic intervals</p>
					<div class="stage-example">
						h(35) = 7, h('SF') = 12, h([2022,2023)<sub>0</sub>) = 45
					</div>
				</div>
			</div>

			<div class="flow-stage">
				<div class="stage-number">4</div>
				<div class="stage-content">
					<h4>Create Embeddings</h4>
					<p>Each hash value gets a learnable embedding vector</p>
					<div class="stage-example">
						Embedding matrix: w × d × n dimensions<br>
						(w = sketch width, d = embedding dim, n = # attributes)
					</div>
				</div>
			</div>

			<div class="flow-stage">
				<div class="stage-number">5</div>
				<div class="stage-content">
					<h4>Train BERT with Masked Language Modeling</h4>
					<p>Randomly mask tokens, predict from context</p>
					<div class="stage-example">
						Input: [7, [MASK], 45] → Target: h('SF') = 12<br>
						Loss: Cross-entropy between predicted and actual distribution
					</div>
				</div>
			</div>
		</div>

		<p style="color: #666; font-size: 0.9em; margin-top: 20px;">
			<strong>Pros:</strong> Clear progression, easy to follow<br>
			<strong>Cons:</strong> Less visual detail on transformations
		</p>
	</div>

	<!-- ============================================ -->
	<!-- VARIATION 5: Compact Table Format -->
	<!-- ============================================ -->
	<div class="variation">
		<h2>Variation 5: Compact Comparison Table</h2>
		<p><strong>Concept:</strong> Show both column types in a single compact table.</p>

		<div class="compact-training">
			<table>
				<thead>
					<tr>
						<th>Stage</th>
						<th>Point Predicate (e.g., city)</th>
						<th>Range Predicate (e.g., year)</th>
					</tr>
				</thead>
				<tbody>
					<tr class="point-pred">
						<td class="stage-col">1. Raw Value</td>
						<td class="example-col">'SF'</td>
						<td class="example-col">2022</td>
					</tr>
					<tr class="range-pred">
						<td class="stage-col">2. Dyadic Annotation</td>
						<td class="example-col">—</td>
						<td class="example-col">[2022,2023)<sub>2⁰</sub>, [2022,2024)<sub>2¹</sub>, ...</td>
					</tr>
					<tr>
						<td class="stage-col">3. Hash</td>
						<td class="example-col">h('SF') = 12</td>
						<td class="example-col">h<sub>0</sub> = 45, h<sub>1</sub> = 28, ...</td>
					</tr>
					<tr>
						<td class="stage-col">4. Embedding</td>
						<td class="example-col" colspan="2">Map each hash to learnable vector in ℝ<sup>d</sup></td>
					</tr>
					<tr>
						<td class="stage-col">5. Training</td>
						<td class="example-col" colspan="2">BERT masked language modeling objective</td>
					</tr>
				</tbody>
			</table>
		</div>

		<div style="margin-top: 20px; padding: 15px; background: #f0f0f0; border-radius: 4px;">
			<strong>Key Difference:</strong> Range predicates require dyadic interval annotation before hashing.
			Point predicates hash directly.
		</div>

		<p style="color: #666; font-size: 0.9em; margin-top: 20px;">
			<strong>Pros:</strong> Very compact, fits well on slide<br>
			<strong>Cons:</strong> Less detail on specific examples
		</p>
	</div>

	<!-- ============================================ -->
	<!-- SUMMARY -->
	<!-- ============================================ -->
	<div class="variation" style="background: #f0f0f0;">
		<h2>Summary & Recommendations</h2>

		<h3>Key Points to Convey:</h3>
		<ol>
			<li><strong>Start with actual table data</strong> - not synthetic</li>
			<li><strong>Dyadic intervals for range predicates</strong> - discretizes continuous domains</li>
			<li><strong>Hash using sketch hash functions</strong> - same functions used at inference</li>
			<li><strong>Create embeddings</strong> - learnable vectors for each hash bin</li>
			<li><strong>Train with masking</strong> - standard BERT objective</li>
		</ol>

		<h3>Best for Different Contexts:</h3>
		<ul>
			<li><strong>Variation 1 (Vertical Pipeline):</strong> Most comprehensive, shows actual data transformation</li>
			<li><strong>Variation 2 (Side-by-Side):</strong> Best for emphasizing point vs range predicate difference</li>
			<li><strong>Variation 3 (Dyadic Focus):</strong> Best if dyadic intervals need detailed explanation</li>
			<li><strong>Variation 4 (Numbered Flow):</strong> Clean and organized, good overview</li>
			<li><strong>Variation 5 (Compact Table):</strong> Most space-efficient for slides</li>
		</ul>

		<h3>Recommended Approach:</h3>
		<p>For the defense presentation, consider:</p>
		<ol>
			<li><strong>Main slide:</strong> Variation 4 (Numbered Flow) - clear progression</li>
			<li><strong>Supporting slide:</strong> Variation 2 or 5 - show point vs range difference</li>
			<li><strong>Optional backup:</strong> Variation 3 - if questions about dyadic intervals</li>
		</ol>
	</div>

</body>
</html>
